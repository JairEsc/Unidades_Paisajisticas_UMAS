datos = read.csv("outputs/rasters_as_matrix.csv")
datos = datos |>
dplyr::mutate(
dplyr::across(.cols = V1:V5,
.fns = ~ dplyr::if_else(is.na(.x), 0, .x)
)
)
BIC2 = mclust::mclustBIC(data = datos, G = 6:15, modelNames = c("EEI","EEV","EEE"))
modelo = mclust::Mclust(data = datos, x = BIC2)
library(mclust)
BIC2
modelo = mclust::Mclust(data = datos, x = BIC2)
resumen = summary(object = modelo, parameters = T)
clasificacion = resumen$classification
clasificacion
length(clasificacion)
pasado = clasificacion[-((length(clasificacion) - 35): length(clasificacion))]
pasado = pasado |>  as.numeric()
clasificacion
clasificacion = resumen$classification |>  as.numeric()
matriz_clasificacion = matrix(data = clasificacion, nrow = 998, ncol = 978, byrow = T)
View(matriz_clasificacion)
clasificacion_matriz = matrix(data = clasificacion, nrow = 998, ncol = 978, byrow = T)
clasificacion_data = raster::raster(clasificacion_matriz)
clasificacion_raster_data = raster::raster(clasificacion_matriz)
clasificacion_raster_data = raster::raster(clasificacion_matriz)
clasificacion_raster_extent = raster::extent(clasificacion_raster_data)
color_palette = terrain.colors(100)
BIC2
modelo
modelo
resumen
plot(clasificacion_raster_data)
raster::plot(clasificacion_raster_data)
raster::plot(clasificacion_raster_data, col=rainbow(15)
)
BIC2
plot(BIC2)
plot(BIC2 |>  as.data.frame())
p = BIC2 |>  as.data.frame()
View(p)
plot(BIC2, G = 6:15)
plot(BIC2, what = "BIC")
BIC2
plot(BIC2, what = "BIC")
BIC2
modelo
modelo = mclust::Mclust(data = datos, x = BIC2)
library(mclust)
modelo$bic
plot(BIC2)
"inputs/rasters/" |> list.files(full.names = T)
"inputs/rasters/" |> list.files(pattern = ".tif$",full.names = T) |> lapply(\(z){plot(raster(z))})
##Nos salieron 15 asÃ­ que se ejecuta un clustering gaussiano (mclust)
library(raster)
"inputs/rasters/" |> list.files(pattern = ".tif$",full.names = T) |> lapply(\(z){plot(raster(z))})
plot(BIC2)
978*998
978*998+35
lista_rasters = list.files("../inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
lista_rasters = list.files("../inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
lista_rasters = list.files("../inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
# Previo
library(raster)
lista_rasters = list.files("../inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster)
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster)
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
View(lista_rasters)
View(lista_rasters)
nombres = tools::file_path_sans_ext(basename(lista_rasters))
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
nombres = tools::file_path_sans_ext(basename(lista_rasters))
lista_rasters
nombres = tools::file_path_sans_ext(list.files("inputs/rasters/",pattern = ".tif$",full.names = T))
lista_rasters
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
nombres = list.files("inputs/rasters/",pattern = ".tif$",full.names = F)
nombres = list.files("inputs/rasters/",pattern = ".tif$",full.names = F) |> tools::file_path_sans_ext()
names(lista_rasters) = nombres
View(lista_rasters)
lista_rasters[["pendiente_200"]]
names(lista_rasters)
View(lista_rasters)
lista_rasters[["pendiente_200"]]
pendiente = lista_rasters[["pendiente_200"]]
View(pendiente)
raster::getValues(x = pendiente)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F)
View(rasters_as_matrix)
names(lista_rasters)
lista_rasters
View(lista_rasters)
lista_rasters[["usv_mbien"]]
p = lista_rasters[["usv_mbien"]]
raster::plot(p)
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F)
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F)
View(rasters_as_matrix)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F) |>  as.data.frame()
rasters_as_matrix = rasters_as_matrix |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
View(rasters_as_matrix)
rasters_as_matrix = rasters_as_matrix |>
dplyr::mutate(
V1 = scale(V1),
V2 = scale(V2),
V3 = scale(V3),
V4 = scale(V4),
V5 = scale(V5),
)
View(rasters_as_matrix)
View(rasters_as_matrix)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F) |>  as.data.frame()
rasters_as_matrix = rasters_as_matrix |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
View(rasters_as_matrix)
rasters_as_matrix = rasters_as_matrix |>
dplyr::mutate(
V1 = scale(V1),
V2 = scale(V2),
V3 = scale(V3),
V4 = scale(V4),
V5 = scale(V5),
)
View(rasters_as_matrix)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F) |>  as.data.frame()
rasters_as_matrix = rasters_as_matrix |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
rasters_as_matrix = scale(rasters_as_matrix)
View(lista_rasters)
View(rasters_as_matrix)
View(rasters_as_matrix)
x <- matrix(1:10, ncol = 2)
View(x)
scale(x)
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F) |>  as.data.frame()
datos = read.csv("outputs/rasters_as_matrix.csv")
View(datos)
datos = datos |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
View(datos)
datos = scale(datos)
datos = read.csv("outputs/rasters_as_matrix.csv")
datos = datos |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
datos = scale(datos) |>  as.data.frame()
View(datos)
datos$V1 |>  min()
datos$V1 |>  minValue()
View(datos)
datos$V1 |>  class()
datos$V1 |>  min(na.rm = T)
datos = datos |>
dplyr::mutate(V1 = V1 + V1 |>  min(na.rm = T),
V2 = V2 + V2 |>  min(na.rm = T),
V3 = V3 + V3 |>  min(na.rm = T),
V4 = V4 + V4 |>  min(na.rm = T),
V5 = V5 + V5 |>  min(na.rm = T))
datos$V1 |>  min(na.rm = T)
datos = read.csv("outputs/rasters_as_matrix.csv")
datos = datos |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
datos = scale(datos) |>  as.data.frame()
datos = datos |>
dplyr::mutate(V1 = V1 + V1 |>  min(na.rm = T) |>  abs(),
V2 = V2 + V2 |>  min(na.rm = T) |>  abs(),
V3 = V3 + V3 |>  min(na.rm = T) |>  abs(),
V4 = V4 + V4 |>  min(na.rm = T) |>  abs(),
V5 = V5 + V5 |>  min(na.rm = T) |>  abs())
datos$V1 |>  min(na.rm = T)
datos$V1 |>  min(na.rm = T)
datos$V2 |>  min(na.rm = T)
datos$V3 |>  min(na.rm = T)
datos$V4 |>  min(na.rm = T)
datos$V5 |>  min(na.rm = T)
datos = datos |>
dplyr::mutate(
dplyr::across(.cols = V1:V5,
.fns = ~ dplyr::if_else(is.na(.x), true = -1, false = .x)
)
)
datos$V1 |>  min(na.rm = T)
datos$V2 |>  min(na.rm = T)
datos$V3 |>  min(na.rm = T)
datos$V4 |>  min(na.rm = T)
datos$V5 |>  min(na.rm = T)
BIC2 = mclust::mclustBIC(data = datos, G = 6:15, modelNames = c("EEI","EEV","EEE"))
plot(BIC2)
modelo = mclust::Mclust(data = datos, x = BIC2)
resumen = summary(object = modelo, parameters = T)
clasificacion = resumen$classification |>  as.numeric()
clasificacion_raster_data = raster::raster(clasificacion_matriz)
clasificacion_matriz = matrix(data = clasificacion, nrow = 998, ncol = 978, byrow = T)
clasificacion_raster_data = raster::raster(clasificacion_matriz)
raster::plot(clasificacion_raster_data, col=rainbow(15))
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
lista_rasters = list.files("inputs/rasters/",pattern = ".tif$",full.names = T) |>  lapply(raster::raster)
rasters_as_matrix = matrix(data = (lista_rasters |>  lapply((raster::getValues))) |> unlist(),
nrow = 998*978,
ncol = 5,
byrow = F) |>  as.data.frame()
names(rasters_as_matrix) = list.files("inputs/rasters/",pattern = ".tif$") |> basename() |>  tools::
names(rasters_as_matrix) = list.files("inputs/rasters/",pattern = ".tif$") |> basename() |>  tools::file_path_sans_ext()
names(rasters_as_matrix)
datos$V3
datos = read.csv("outputs/rasters_as_matrix.csv")
datos = datos |>
dplyr::mutate(V5 = dplyr::if_else(condition = V5 == 0, true = NA, false = V5))
datos$V3
datos$V3
datos$V3 |>  hist()
datos$V3 |>  max()
datos$V3 |>  max(na.rm = T)
datos$V3 |>  min(na.rm = T)
datos$V3 < 90
mean(datos$V3 < 90)
mean(datos$V3[datos$V3 < 90])
mean(datos$V3[datos$V3 < 90], na.rm = T)
datos = datos |>
dplyr::mutate(
V3 = dplyr::if_else(
condition = V3 > 90,
true = mean(V3[V3 < 90], na.rm = TRUE),
false = V3
)
)
datos$V3 |>  max(na.rm = T)
datos$V3 |>  min(na.rm = T)
