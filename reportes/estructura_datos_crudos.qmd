---
title: "estructuracion_datos_crudos"
author: "JairES"
format: html
editor: visual
---

## Datos crudos

De acuerdo a la documentación oficial, se consideran 5 variables:

-    **Pendientes**: La inclinación del terreno influye directamente en
    procesos de erosión, escorrentía y estabilidad del suelo. Áreas con
    pendientes pronunciadas suelen estar más expuestas a degradación y
    requieren estrategias específicas de conservación.

-   **Altitud**: La elevación determina variaciones microclimáticas,
    distribución de especies y disponibilidad de recursos hídricos.
    Diferentes altitudes pueden albergar ecosistemas únicos con
    dinámicas particulares.

-   **Precipitación**: La cantidad de lluvia determina la distribución de la
    vegetación, la recarga de acuíferos y la estabilidad de los ecosistemas.
    Regiones con alta o baja precipitación presentan desafíos particulares
    en términos de conservación y manejo de recursos hídricos

-   **Uso de suelo y vegetación**: La interacción entre cobertura vegetal
    y actividades humanas define el estado de conservación de un
    territorio. Áreas con alta intervención antrópica pueden requerir
    estrategias de restauración, mientras que zonas con vegetación bien
    conservada pueden ser clave para la conectividad ecológica

-   **Subcuencas hidrológicas**: Las subcuencas regulan los flujos de
    agua y pueden ser áreas prioritarias para estrategias mitigación de
    impactos ambientales, por lo que su uso en la delimitación de
    unidades paisajístas permite una mejor gestión de recursos.

## Raster

Los datos crudos provienen de archivos .tif que tienen las mismas dimensiones, resolución y proyección.

```{r}
#| include: false
library(raster)
library(mclust)
```

```{r}
list.files("../inputs/rasters/",pattern = ".tif$")
```

Leemos los archivos y los guardamos en una lista.

```{r}
list.files("../inputs/rasters/",pattern = ".tif$",full.names = T) |> 
  lapply(raster)->lista_rasters
```

Utilizamos los raster como una matriz de dimensiones $(998*978)*(5)$ o bien un tensor de \$\$(998) \\cdot (978) \\cdot (5)\$\$.

```{r}
rasters_as_matrix=matrix(data = (lista_rasters |>  lapply((getValues))) |> unlist(),
      nrow = 998*978,
      ncol = 5,
      byrow = F)
```

Se puede verificar que cada columna representa un raster, generandola a partir de ésta.

```{r}
rasters_as_matrix[,1] |> matrix(nrow = 998,ncol = 978,byrow = T) |> raster() |> plot()
```

El archivo se guarda en la carpeta "outputs". Por cuestiones de tamaño (976,044 renglones), este archivo no se encuentra en el repositorio.

```{r}
write.csv(rasters_as_matrix,file = "../outputs/rasters_as_matrix.csv",row.names = F)
```

\
